# Project-Specific Rules for WhatsApp SimHub Plugin

## Language Preferences
- **User Communication**: Always speak in Portuguese (PT-PT/PT-BR)
- **Code & UI**: Use English for all code, comments, UI text, and git commits
- **Documentation**: GitHub README and docs in English

## Project Context
- WhatsApp integration plugin for SimHub (racing simulator dashboard software)
- Two backend options: Baileys (main) and whatsapp-web.js (legacy)
- Currently using Baileys v7 with LID (LinkedID) resolution via remoteJidAlt/participantAlt

## Recent Major Changes
1. **LID Resolution**: Implemented using `remoteJidAlt` and `participantAlt` fields from Baileys v7
2. **UI Consolidation**: Eliminated SetupControl completely, moved everything to SettingsControl Connection tab
3. **Background Installation**: Install button now works without closing SimHub, deletes entire node_modules folder

## Development Workflow
- Always create safety tags before major changes
- Incremental commits with descriptive messages
- Test after each significant change
- User has SimHub installed at: C:\Program Files (x86)\SimHub\
- Resources scripts cached at: C:\Users\bruno\AppData\Roaming\SimHub\

## Build System - CRITICAL
- **NEVER use `dotnet CLI` to build this project** - it fails to compile XAML correctly
- **ALWAYS use the batch file**: `build-and-deploy.bat`
- The batch file uses MSBuild 2022 Professional: `C:\Program Files\Microsoft Visual Studio\2022\Professional\MSBuild\Current\Bin\amd64\MSBuild.exe`
- If you need to compile manually, use MSBuild directly via PowerShell, NOT dotnet CLI
- The project requires MSBuild for proper XAML code-behind generation (.g.cs files)

## DLL Copy - IMPORTANT
- **NEVER use background tasks to copy DLL** to SimHub
- If copy fails because SimHub is open, ASK user to close it
- Don't try multiple times automatically - let user control when SimHub closes
- Simple approach: Try copy once, if fails inform user
